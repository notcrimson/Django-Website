# Useful commands used in creating the site

| Table of contents                                  |
| -------------------------------------------------- |
| [Virtual environment](#virtual-environment)        |
| [Commands with manage.py](#commands-with-managepy) |
| [Git commands](#git-commands)                      |

---

## Virtual environment:

### Creating the virtual environment:

`py -m venv venv`

### Activating virtual environment:

`venv\Scripts\activat.bat`

### Installs all the addons that are listed in the `requirments.txt` to the pc

`pip install -r requirments.txt`

> ## <center> :warning: </center>
>
> <center class ="info"> Make sure the you are using the virtual environment before running the command so you dont download it globally </center>

<p></p>

### Adds all the installed addons names to a text file

`pip freeze > requirments.txt`

---

## Commands with manage.py

### Creates an app, make sure you’re in the same directory as `manage.py` so that it can be imported as its own top-level module, rather than a submodule of **yourproject**, then type this command:

`py manage.py startapp name_of_app`

> replace `name_of_app` with the name that you want for the app to have

<p></p>

### Create an admin account in the data base `auth_user` to access the `/admin` page:

`py manage.py createsuperuser`

### Run the website server:

`py manage.py runserver`

### The `sqlmigrate` command doesn’t actually run the migration on your database - instead, it prints it to the screen so that you can see what SQL Django thinks is required. It’s useful for checking what Django is going to do or if you have database administrators who require SQL scripts for changes.

`py manage.py sqlmigrate polls 0001`

> ## <center> :page_facing_up: </center>
>
> `0001` stands for initial change that you can find in the _**migration**_ directory

Example output:

```sql
BEGIN;
--
-- Create model Question
--
CREATE TABLE "polls_question" (
    "id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    "question_text" varchar(200) NOT NULL,
    "pub_date" timestamp with time zone NOT NULL
);
--
-- Create model Choice
--
CREATE TABLE "polls_choice" (
    "id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    "choice_text" varchar(200) NOT NULL,
    "votes" integer NOT NULL,
    "question_id" bigint NOT NULL
);
ALTER TABLE "polls_choice"
  ADD CONSTRAINT "polls_choice_question_id_c5b4b260_fk_polls_question_id"
    FOREIGN KEY ("question_id")
    REFERENCES "polls_question" ("id")
    DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "polls_choice_question_id_c5b4b260" ON "polls_choice" ("question_id");

COMMIT;
```

### Migrate the data base scheme(model) to the database that you are connected to in `setting.py`:

`py manage.py migrate`

---

## Git commands

### When adding some new lines to `.gitignore` the files to yet be commited are listed some of the ignored files show up, so you use this command to clear the cache.

`git rm -rf --cached .`

> the `.` means all files

<!-- CSS -->

<style>
.info{
    font-style:italic;
}
</style>
